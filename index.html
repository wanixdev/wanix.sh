<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>
      Wanix :: Virtual environment kit for the local-first web, inspired by Plan 9
    </title>
    <link rel="stylesheet" href="/assets/styles.css"/>
  </head>
  <body>
    <header>
      <a href="/">
        <svg height="56" viewBox="0 0 326 56" fill="none" xmlns="http://www.w3.org/2000/svg" width="326">
          <path d="M33.6 0.499999H38.4C41.2 0.499999 42.8 2.1 43 5.1V32.9C43 35.8 44.5 37.3 47.6 37.5H48.5C51.3 37.5 52.9 35.9 53.1 32.7V4.99999C53.1 2 54.6 0.499999 57.7 0.499999H66.9C69.8 0.499999 71.4 2 71.6 4.99999V46.8C71.2 53 68.1 56 62.5 56H9.7C4 56 0.9 53 0.4 46.8V4.99999C0.6 2 2.1 0.499999 5.1 0.499999H14.3C17.3 0.499999 18.9 2 18.9 4.99999V32.7C19.1 35.8 20.6 37.3 23.5 37.3H24.4C27.4 37.1 29 35.6 29 32.7V5.1C29.2 2.1 30.7 0.499999 33.6 0.499999ZM87.6273 0.499999H127.327C129.527 0.499999 131.127 1.1 132.327 2.3C133.427 3.5 134.027 5.3 134.027 7.9V51.4C134.027 54.2 132.427 55.8 129.427 56H120.227C117.327 56 115.827 54.5 115.627 51.4V14.2C115.427 11.5 113.827 10 111.027 9.7H96.7273C94.1273 9.9 92.7273 11.5 92.5273 14.4V28.2C92.5273 34 95.5273 37.1 101.727 37.5H106.427C109.427 37.7 111.027 39.3 111.027 42.1V51.5C111.027 54.5 109.427 56 106.427 56H96.9273C94.1273 56 91.5273 55.6 89.2273 54.7C86.9273 53.8 85.0273 52.5 83.4273 50.8C81.8273 49.2 80.5273 47.2 79.7273 45C78.8273 42.8 78.4273 40.3 78.4273 37.5V9.7C78.4273 3.9 81.4273 0.9 87.6273 0.499999ZM201.03 0.499999C203.83 0.499999 205.43 2.1 205.63 5.1V46.8C205.23 53 202.13 56 196.43 56H185.33C182.73 56 180.43 55.6 178.43 54.8C176.33 54 174.53 52.8 173.13 51.3C171.63 49.8 170.43 48 169.63 45.8C168.83 43.6 168.43 41.2 168.43 38.4V14.4C168.43 11.6 166.93 10.1 163.93 9.7C160.83 10 159.33 11.6 159.33 14.4V51.4C159.13 54.5 157.53 56 154.53 56H145.43C142.53 56 141.03 54.5 140.83 51.4V9.7C141.23 3.6 144.23 0.499999 150.03 0.499999H173.33C179.43 0.499999 182.53 3.6 182.53 9.7V33.4C182.53 36.2 184.03 37.5 187.03 37.5C188.23 37.4 189.23 36.9 190.23 35.9C191.13 35 191.63 34.2 191.63 33.5V5.1C191.83 2.1 193.43 0.499999 196.43 0.499999H201.03ZM254.312 37.5C257.312 37.5 258.912 39 258.912 41.8V51.5C258.912 54.5 257.312 56 254.312 56H217.012C213.912 56 212.412 54.5 212.412 51.5V42.1C212.412 39.1 213.912 37.5 217.012 37.5H222.112C224.612 37.2 226.012 35.8 226.212 33.4V14.4C226.212 11.7 224.712 10.1 221.912 9.7H217.012C214.112 9.7 212.612 8.2 212.412 5.1C212.612 2.1 214.112 0.499999 217.012 0.499999H254.312C257.112 0.499999 258.712 2.1 258.912 5.1C258.712 8.2 257.312 9.7 254.712 9.7H249.112C246.212 10.1 244.812 11.6 244.812 14V33.2C244.812 35.7 246.212 37.1 249.112 37.5H254.312ZM298.632 23.4C300.032 23.4 301.332 22.9 302.432 22C303.532 21.1 304.432 20 305.232 18.7C305.932 17.4 306.432 15.9 306.832 14.3C307.232 12.7 307.432 11.2 307.432 9.7V5.1C307.432 2.1 308.932 0.499999 312.032 0.499999H321.332C324.332 0.499999 325.932 2.1 325.932 5.1V14.3C325.932 18.5 324.832 21.8 322.632 24.1C320.432 26.4 317.332 27.8 313.332 28.2C317.532 28.6 320.632 29.9 322.732 32.3C324.832 34.7 325.932 38 325.932 42.2V51.4C325.932 54.5 324.332 56 321.332 56H312.032C308.932 56 307.432 54.5 307.432 51.4V46.8C307.432 45.4 307.232 43.8 306.832 42.1C306.432 40.5 305.832 39 305.032 37.6C304.232 36.2 303.332 35.1 302.132 34.2C300.932 33.3 299.632 32.8 298.232 32.8H293.432C291.832 32.8 290.532 33.3 289.432 34.2C288.232 35.1 287.332 36.2 286.532 37.6C285.732 39 285.232 40.5 284.832 42.1C284.432 43.8 284.232 45.4 284.232 46.8V51.4C284.232 54.5 282.632 56 279.632 56H270.332C267.232 56 265.732 54.5 265.732 51.4V42.2C265.732 38 266.732 34.7 268.832 32.3C270.932 29.9 274.132 28.6 278.332 28.2C274.332 27.8 271.232 26.4 269.032 24.1C266.832 21.8 265.732 18.5 265.732 14.3V5.1C265.732 2.1 267.232 0.499999 270.332 0.499999H279.632C282.632 0.499999 284.232 2.1 284.232 5.1V9.7C284.232 12.7 284.832 15.3 286.232 17.4C287.532 19.6 289.332 21.6 291.632 23.4H298.632Z" fill="black"></path>
        </svg>
      </a>
      <div class="nav-container">
        <p>
          A virtual environment kit for the local-first web, inspired by Plan 9
        </p>
        <nav class="main-nav">
          <ul>
            <li>
              <a href="https://github.com/tractordev/wanix" target="_blank">
                <img src="/assets/github-mark.svg"/>
              </a>
            </li>
          </ul>
        </nav>
      </div>
      <hr class="thick"/>
      <hr class="thick"/>
    </header>
    <main>
      <section id="video-container">
        <iframe style="border:0px solid;" src="https://www.youtube.com/embed/kGBeT8lwbo0" width="900" height="500"></iframe>
      </section>
      <section>
        <h2 class="lined">
          Features
        </h2>
        <div id="features">
          <div class="features-section">
            <div>
              <div class="plus-bullet">
                +
              </div>
              <p>
                Capability-oriented microkernel architecture ("everything is a file")
              </p>
            </div>
            <div>
              <div class="plus-bullet">
                +
              </div>
              <p>
                Abstract POSIX process model for generalized compute execution
              </p>
            </div>
            <div>
              <div class="plus-bullet">
                +
              </div>
              <p>
                Per-process namespaces for security, isolation, and custom environments
              </p>
            </div>
            <div>
              <div class="plus-bullet">
                +
              </div>
              <p>
                Built-in emulator for x86 support, Linux compatibility, and Docker-like functionality
              </p>
            </div>
          </div>
          <div class="features-section">
            <div>
              <div class="plus-bullet">
                +
              </div>
              <p>
                Runs in the browser as well as natively on Mac, Windows, and Linux
              </p>
            </div>
            <div>
              <div class="plus-bullet">
                +
              </div>
              <p>
                Web: File interfaces for OPFS, DOM, web workers, and service workers
              </p>
            </div>
            <div>
              <div class="plus-bullet">
                +
              </div>
              <p>
                Web: Runs WASI WebAssembly and x86 executables
              </p>
            </div>
            <div></div>
          </div>
        </div>
      </section>
      <section>
        <h2 class="lined">
          Quick Start
        </h2>
        <h3>
          Try Now
        </h3>
        <p>
          Play with the stock Wanix distro at
          <a href="https://wanix.run">
            wanix.run
          </a>
        </p>
        <h3>
          Install Toolchain
        </h3>
        <p>
          The Wanix CLI is available for download from the
          <a href="https://github.com/tractordev/wanix/releases/latest">
            latest release
          </a>
          :
        </p>
        <pre>bash -c "$(curl -sSL https://raw.githubusercontent.com/tractordev/wanix/main/install.sh)"</pre>
        On Mac, you can install using
        <a href="https://brew.sh/">
          Homebrew
        </a>
        :
        <pre>brew tap progrium/homebrew-taps
brew install wanix</pre>
        <h3>
          Toolchain Usage
        </h3>
        <p>
          The
          <code>
            wanix
          </code>
          command has a number of subcommands in development, but the primary command is
          <code>
            wanix serve
          </code>
          , which will serve Wanix at
          <code>
            http://localhost:7654
          </code>
          .
        </p>
        <p>
          There is a
          <code>
            --listen
          </code>
          flag to change the port and optionally the address to listen on. This will serve on port 6543:
          <code>
            wanix serve --listen :6543
          </code>
        </p>
        <h3>
          Using the Wanix Environment
        </h3>
        <h4>
          Add Files
        </h4>
        <p>
          You can easily add files to the Wanix environment by dragging files onto the terminal. This will put them in
          <code>
            /web/opfs
          </code>
          .
        </p>
        <p>
          In Chrome, you can also use the
          <code>
            pickerfs
          </code>
          capability to mount a full directory in Wanix for the duration of your session. Run
          <code>
            id=$(capctl new pickerfs mount)
          </code>
          to bring up a directory picker. The resulting
          <code>
            id
          </code>
          can be used to get to the mount:
          <code>
            cd /cap/$id/mount
          </code>
          .
        </p>
        <p>
          Lastly, you can mount a tar or gzipped tar from a URL with the
          <code>
            tarfs
          </code>
          capability using the same process as
          <code>
            pickerfs
          </code>
          but with
          <code>
            capctl new tarfs mount
            <url>
          </code>
          .
        </p>
        <h4>
          Run WASI
        </h4>
        <p>
          WASI Wasm executables can simply be run like running a normal executable once added to the environment. Tested languages that can compile to Wasm and run in Wanix include Golang, Rust, and Zig.
        </p>
        <h4>
          Load Page in Window
        </h4>
        <p>
          Files in the root namespace can be accessed via subpaths on the domain with the prefix
          <code>
            /:
          </code>
          , so accessing
          <code>
            /web/opfs/file.html
          </code>
          would work using
          <code>
            /:/web/opfs/file.html
          </code>
          . This works for any HTML elements or JS functions that take a URL, including fetch and iframes.
        </p>
        <p>
          We use iframes as windows (by styling and JS), which can be created with:
        </p>
        <pre><code>id=$(domctl new iframe)
domctl body append-child $id</code></pre>
        <p>
          Then you can load a URL in the iframe by setting its
          <code>
            src
          </code>
          attribute:
        </p>
        <pre><code>echo src=/:/web/opfs/file.html >> /web/dom/$id/attrs</code></pre>
        <p>
          You can "close" a window by removing the iframe:
        </p>
        <pre><code>domctl $id remove</code></pre>
        <h4>
          Run JS in a Web Worker
        </h4>
        <p>
          If you have a JavaScript source file you want to run in a Web Worker, you can use
          <code>
            workerctl start
            <file>
          </code>
          , which returns a resource ID you can use under
          <code>
            /web/worker
          </code>
          .
        </p>
        <p>
          You can terminate the worker with
          <code>
            workerctl
            <id>
            terminate
          </code>
          .
        </p>
        <h4>
          Manipulate DOM
        </h4>
        <p>
          You can currently create DOM elements using
          <code>
            domctl
          </code>
          . Run
          <code>
            domctl new
          </code>
          to see available element types. For example, you can allocate a div element and get a resource ID for it with
          <code>
            domctl new div
          </code>
          . DOM resources are under
          <code>
            /web/dom
          </code>
          , including a named resource for the
          <code>
            body
          </code>
          .
        </p>
        <p>
          You can also append CSS styles to the page by appending to
          <code>
            /web/dom/style
          </code>
          :
        </p>
        <pre><code>echo "html { border: 8px solid lightgreen; }" >> /web/dom/style</code></pre>
      </section>
      <section id="newsletter">
        <h2 class="lined">
          Stay in touch
        </h2>
        <p>
          Subscribe to our sponsor mailing list for updates and more.
        </p>
        <a href="https://github.com/sponsors/progrium" target="_blank">
          <button>
            Join sponsors
          </button>
        </a>
      </section>
    </main>
    <footer></footer>
  </body>
</html>